<input type="button" value="AddItem" (click)="addItems()" />
<form [formGroup]="orderForm">
  <!-- <label>{{item.get('name').value}}</label> -->
  <div
    formArrayName="items"
    *ngFor="let item of orderForm.controls['items'].controls; let idx = index;"
  >
    <div [formGroupName]="idx">
      <!-- <label>{{item.get('name').value}}</label> -->
      <input formControlName="name" placeholder="Item name" />
      <input type="button" value="subAdd" (click)="addSubItems(item)" />

      <div
        formArrayName="subItems"
        *ngFor="let subItem of item.controls.subItems.controls; let subIdx = index;"
      >
        <div [formGroupName]="subIdx">
          <!-- <label>{{subItem.get('subname').value}}</label> -->
          <!-- <input formControlName="subname" placeholder="Item name" /> -->

          <mat-form-field appearance="fill">
            <mat-label>Select an Attribute</mat-label>
            <mat-select formControlName="subname" [(value)]="subname">
              <mat-option>None</mat-option>
              <mat-option value="option1">Option 1</mat-option>
              <mat-option value="option2">Option 2</mat-option>
              <mat-option value="option3">Option 3</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Select an Attribute</mat-label>
            <mat-select formControlName="description" [(value)]="description">
              <mat-option>None</mat-option>
              <mat-option value="value">Value 1</mat-option>
              <mat-option value="value2">Value 2</mat-option>
              <mat-option value="value3">Value 3</mat-option>
            </mat-select>
          </mat-form-field>
          <!-- <input formControlName="description" placeholder="Item description" /> -->
          <input
            type="button"
            value="remove"
            (click)="removeSubItems(subIdx)"
          />
          <mat-divider></mat-divider>
        </div>
      </div>
    </div>
  </div>
</form>

<pre>{{orderForm.value | json}}</pre>
